{"version":3,"sources":["locate.js","Azimut.js","ControlPanel.js","Radar24.js","Dalnost.js","index.js"],"names":["lat","lon","latPred","lonPred","two","three","four","a","data","one","fetch","method","body","JSON","stringify","headers","then","res","json","aircraft","catch","err","console","log","toRadians","degrees","Math","PI","Azimut","item","lat1","lon1","startLat","startLng","destLat","destLng","y","sin","cos","x","brng","atan2","ControlPanel","props","latRef","React","createRef","lonRef","radius","useState","controlOn","setControlOn","azCheck","setAzCheck","formCheck","setFormCheck","className","ref","defaultValue","placeholder","type","name","id","onClick","current","value","rad1","coordinates","alert","checked","onChange","e","radarON","allForms","xmlns","viewBox","d","Radar24","mapboxgl","accessToken","locBase","setLocBase","setLat","setLon","setRadius","setAzimutOn","time1","setTime1","time2","setTime2","allFormsOn","setAllFormsOn","markers","setMarkers","form","setForm","mapContainer","useRef","map","zoom","useEffect","Map","container","style","center","document","querySelector","display","array","addMarker","popup","Popup","offset","setHTML","round","airplaneCont","createElement","airplane","transform","appendChild","innerHTML","marker","Marker","setLngLat","setPopup","addTo","push","length","i","getElement","firstElementChild","getPopup","arr","includes","clearTimeout","setTimeout","work","locate","lat2","lon2","φ1","φ2","Δφ","Δλ","sqrt","Dalnost","latitude","longitude","viewport","setViewport","target","rad","width","height","event","stopPropagation","onMarkerClick","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9be8bca4.chunk.js","sourcesContent":["\n  export default async function locate(lat, lon, latPred, lonPred) { //Запрос данных с FlightRadar24\n    function one(){if(+lat+lonPred >= 90){\n      return 90\n    }      else{\n      return +lat+lonPred;\n    }}\n    function two(){if(+lon-latPred <= -180){\n      return -180\n    }      else{\n      return +lon-latPred;\n    }}\n    function three(){if(+lat-lonPred <= -90){\n      return -90\n    }      else{\n      return +lat-lonPred;\n    }\n  }\n    function four(){if(+lon+latPred >= 180){\n      return 180\n    }\n      else{\n        return +lon+latPred;\n      }\n    }\n    const data ={\n      one: one(),\n      two: two(),\n      three: three(),\n      four: four(),\n    }\n     const url = `http://45.141.77.150:8080`\n      return fetch(url, {\n        method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => {return res.json()})\n      .then(res =>{return res.aircraft})\n      .catch(err => \n        {console.log('error locate')\n        // alert(\n        //   \"Ошибка!\",\n        //   \"Проверьте подключение к интернету и перезагрузите приложение.\",\n        //   [\n        //     {\n        //       text: \"Отмена\",\n        //       style: \"cancel\",\n        //     },\n        //     { text: \"Перезагрузка\", onPress: () => window.location.reload()}\n        //   ,\n        //   ]\n        // )\n      }\n      )\n    }","   function toRadians(degrees) {\n    return degrees * Math.PI / 180;\n  };\n\n  function toDegrees(radians) {\n    return radians * 180 / Math.PI;\n  }\n\n  export default function Azimut(item, lat1, lon1) {\n    let startLat = lat1;\n    let startLng = lon1;\n    let destLat = item[2]\n    let destLng = item[3]\n\n    startLat = toRadians(startLat);\n    startLng = toRadians(startLng);\n    destLat = toRadians(destLat);\n    destLng = toRadians(destLng);\n\n    const y = Math.sin(destLng - startLng) * Math.cos(destLat);\n    const x = Math.cos(startLat) * Math.sin(destLat) -\n      Math.sin(startLat) * Math.cos(destLat) * Math.cos(destLng - startLng);\n    let brng = Math.atan2(y, x);\n    brng = toDegrees(brng);\n    return (brng + 360) % 360;\n  }","import React, {useState} from \"react\";\n\nexport default function ControlPanel(props) {\n    const latRef = React.createRef();\n    const lonRef = React.createRef();\n    const radius = React.createRef();\n    const [controlOn, setControlOn] = useState(false)\n    const [azCheck, setAzCheck] = useState(false)\n    const [formCheck, setFormCheck] = useState(false)\n\n    function getRadar() {\n        if (latRef.current.value && lonRef.current.value) {\n          let lat1 = +latRef.current.value;\n          let lon1 = +lonRef.current.value;\n          let rad1 = +radius.current.value;\n          if ((lat1 >= -84) & (lon1 >= -178)) {\n              props.coordinates(lat1, lon1, rad1)\n          } else {\n            alert(\"Введите верные координаты!\");\n          }\n        } else {\n          alert(\"Введите обе координаты!\");\n        }\n      }\n    return(\n        <>\n        <div className=\"control__panel\">\n        {controlOn ?\n        <>\n        <div className=\"input__radar\">\n          <div>\n            <div>Широта</div>\n          <input\n            ref={latRef}\n            defaultValue={props.lat}\n            placeholder=\"Введите latitude\"\n            type=\"text\"\n            name=\"lat\"\n            id=\"lat\"\n            className=\"form\"\n          />\n          </div>\n          <div>\n            <div>Долгота</div>\n          <input\n            ref={lonRef}\n            defaultValue={props.lon}\n            placeholder=\"Введите longitude\"\n            type=\"text\"\n            name=\"lon\"\n            id=\"lon\"\n            className=\"form\"\n          />\n          </div>\n          <div>\n            <div>Радиус</div>\n          <input\n            ref={radius}\n            defaultValue={props.radius}\n            placeholder=\"Введите радиус поиска\"\n            type=\"text\"\n            name=\"radius\"\n            id=\"radius\"\n            className=\"form\"\n          />\n          </div>\n          <button onClick={getRadar} type=\"submit\">\n            Ввод\n          </button>\n        </div>\n        <div>\n        <div>\n          <div>Азимутальный круг</div>\n        <label className=\"switch\">\n          <input\n            checked={azCheck}\n            onChange={(e) => {\n              setAzCheck(!azCheck)\n              props.radarON(e)\n            }}\n            type=\"checkbox\"\n          />\n          <span className=\"slider round\"></span>\n        </label>\n        </div>\n        <div>\n          <div>Все формуляры</div>\n        <label className=\"switch\">\n          <input\n            checked={formCheck}\n            onChange={(e) => {\n              setFormCheck(!formCheck)\n              props.allForms(e)\n            }}\n            type=\"checkbox\"\n          />\n          <span className=\"slider round\"></span>\n        </label>\n        </div>\n        </div>\n        </>: null}\n      </div>\n      <div onClick={()=>{controlOn ? setControlOn(false) : setControlOn(true)}} className=\"control_arrow\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z\"/></svg>\n      </div>\n        </>\n    )\n}","import { useState, useEffect } from \"react\";\nimport React, { useRef } from \"react\";\nimport \"./Radar24.css\";\nimport Radar from \"./Radar\";\nimport locate from \"./locate\";\nimport Dalnost from \"./Dalnost\";\nimport Azimut from \"./Azimut\";\nimport ControlPanel from \"./ControlPanel\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport mapboxgl from \"!mapbox-gl\"; // eslint-disable-line import/no-webpack-loader-syntax\n\nfunction Radar24() {\n  mapboxgl.accessToken =\n    \"pk.eyJ1Ijoib3ZlcmJyYXRzayIsImEiOiJjbDNlZmVmNHIwYnJvM2JwNmh5dW1iNDI3In0.ne2arVpZtSj4RSykE0hLdw\";\n  const [locBase, setLocBase] = useState([]);\n  const [lat, setLat] = useState(61.28527651284786);\n  const [lon, setLon] = useState(63.17582723137468);\n  const [radius, setRadius] = useState(300);\n  const [azimutOn, setAzimutOn] = useState(false);\n  const [time1, setTime1] = useState();\n  const [time2, setTime2] = useState();\n  const [allFormsOn, setAllFormsOn] = useState(false);\n  const [markers, setMarkers] = useState(0);\n  let latPred;\n  let lonPred;\n  // let granica1 = lat + 2.6;\n  // let granica2 = lon - 5.7;\n  // let granica3 = lat - 2.8;\n  // let granica4 = lon + 5.4;\n  const [form, setForm] = useState(0);\n\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const [zoom, setZoom] = useState(9);\n\n  useEffect(() => {\n    if (map.current) return; // initialize map only once\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [lon, lat],\n      zoom: zoom,\n    });\n  });\n\n  const onMarkerClick = (item, event) => {\n    if (!allFormsOn) {\n      item[0] === form ? setForm(0) : setForm(item[0]);\n      try {\n        event.stopPropagation();\n      } catch (e) {\n        return;\n      }\n    } else {\n      return;\n    }\n  };\n\n  function coordinates(lat, lon, rad) {\n    setLat(+lat);\n    setLon(+lon);\n    if (rad) {\n      setRadius(+rad);\n    }\n    if (rad) {\n      setViewport({\n        latitude: lat,\n        longitude: lon,\n        zoom: 5.8,\n      });\n    }\n  }\n\n  function radarON(e) {\n    setAzimutOn(e.target.checked);\n  }\n  function allForms(e) {\n    setAllFormsOn(e.target.checked);\n  }\n\n  useEffect(() => {\n    try {\n      const footer = document.querySelector(\".footer\");\n      footer.style.display = \"none\";\n    } catch (e) {\n      return;\n    }\n  }, []);\n\n\n\n  useEffect(() => {\n    const array = [];\n\n    function addMarker(item){\n      const popup = new mapboxgl.Popup({\n        offset: 25,\n        className: \"marker__table\",\n      }).setHTML([\n        `<p>Азимут: ${Math.round(item[20])}</p>\n        <p>Дальность: ${Math.round(item[19] / 100) / 10}</p>\n        <p>Высота: ${Math.round(item[5] / 0.33) / 10}</p>\n        <p>Скорость: ${Math.round(item[6] * 1.87)}</p>\n        <p>Курс: ${item[4]}</p>`,\n      ]);\n      const airplaneCont = document.createElement(\"div\");\n      const airplane = document.createElement(\"div\");\n      airplaneCont.className = \"radar24__marker__cont\";\n      airplane.className = \"radar24__marker\";\n      airplane.id = item[0];\n      airplane.style.transform = `rotate(${item[4]-90}deg)`\n      const name = document.createElement(\"div\");\n      airplaneCont.appendChild(airplane);\n      airplaneCont.appendChild(name);\n      name.className = \"marker__name\";\n      name.innerHTML = `${item[17] || \"Без названия\"}`;\n      const marker = new mapboxgl.Marker(airplaneCont)\n        .setLngLat([item[3], item[2]])\n        .setPopup(popup)\n        .addTo(map.current);\n      array.push(marker);\n    }\n\n      if (markers.length === locBase.length) {\n        locBase.map((item) => {\n        markers.map((i)=>{\n          if(i.getElement().firstElementChild.id === item[0]){\n            i.setLngLat([item[3], item[2]])\n          \n          i.getElement().firstElementChild.transform = `rotate(${item[4]-90}deg)`\n         const pop = i.getPopup()\n         pop.setHTML([\n          `<p>Азимут: ${Math.round(item[20])}</p>\n          <p>Дальность: ${Math.round(item[19] / 100) / 10}</p>\n          <p>Высота: ${Math.round(item[5] / 0.33) / 10}</p>\n          <p>Скорость: ${Math.round(item[6] * 1.87)}</p>\n          <p>Курс: ${item[4]}</p>`,\n        ]);\n      }\n        }\n        )\n      })\n      } else {\n        if(locBase.length > markers.length){\n          markers.length > 0 ? locBase.map((item) => {\n            const arr = markers.map((i)=>{\n                if(item[0] === i.getElement().id){\n                  return true\n                }\n              })\n              console.log(arr)\n              if(arr.includes(true)){\n                return} else{\n                  addMarker(item)\n                  }\n                  return\n          }) : locBase.map((item) => {\n            addMarker(item)\n          })\n        }\n        else if(locBase.length < markers.length){\n          locBase.map((item) => {\n            const arr = markers.map((i)=>{\n                if(item[0] == i.getElement().id){\n                  return true\n                }\n              })\n              console.log(arr);\n          })\n        }\n        \n      setMarkers(array);\n    };\n    if (!map.current) return; // wait for map to initialize\n  }, [locBase]);\n\n  useEffect(() => {\n    clearTimeout(time1);\n    clearTimeout(time2);\n    //запрос данных с FlightRadar24 по введенным координатам\n    setTime1(\n      setTimeout(function work() {\n        latPred = +radius / (Math.cos(+lat * (Math.PI / 180)) * 111.321377778);\n        lonPred = +radius / 111.134861111;\n        locate(lat, lon, latPred, lonPred)\n          .then((res) => {\n            res.map((item) => {\n              item.push(Dalnost(item, lat, lon));\n              item.push(Azimut(item, lat, lon));\n            });\n            return res;\n          })\n          //добавление в массив результатов азимута самолета\n          .then((res) => setLocBase(res))\n          .then((res) => setTime2(setTimeout(work, 1000)))\n          .catch((err) => console.log(err));\n        // });\n      }, 1000)\n    );\n  }, [lat, lon, radius]);\n\n  const [viewport, setViewport] = React.useState({\n    //Карта\n    latitude: lat,\n    longitude: lon,\n    zoom: 5.8,\n  });\n\n  return (\n    <div className=\"radar24\">\n      <ControlPanel\n        allForms={allForms}\n        radarON={radarON}\n        lat={lat}\n        lon={lon}\n        radius={radius}\n        coordinates={coordinates}\n      ></ControlPanel>\n      <div className=\"radar24__position\">\n        <div\n          ref={mapContainer}\n          className=\"radar24__map\"\n          id=\"666\"\n          // doubleClickZoom={false}\n          // dragRotate={false}\n          {...viewport}\n          width=\"100%\"\n          height=\"100%\"\n          onClick={() => onMarkerClick(0)}\n          // onDblClick={(event)=>{coordinates(event.lngLat[1], event.lngLat[0])}}\n        />\n\n        {/* <Marker latitude={lat} longitude={lon}>\n              {azimutOn ?\n             \n               <Radar/>\n                : null}\n            </Marker> */}\n      </div>\n    </div>\n  );\n}\nexport default Radar24;\n","export default function Dalnost(item, lat1, lon1) {\n    let lat2 = item[2];\n    let lon2 = item[3];\n    const R = 6371e3; // метры\n    const φ1 = lat1 * Math.PI / 180; // φ, λ в радианах\n    const φ2 = lat2 * Math.PI / 180;\n    const Δφ = (lat2 - lat1) * Math.PI / 180;\n    const Δλ = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\n      Math.cos(φ1) * Math.cos(φ2) *\n      Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const d = R * c; // в метры\n    return d;\n  }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Radar24 from './Radar24';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Radar24 />\n  </React.StrictMode>,\n    document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}