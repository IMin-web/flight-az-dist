{"version":3,"sources":["Radar.js","locate.js","Azimut.js","MarkerRadar.js","ControlPanel.js","Radar24.js","Dalnost.js","index.js"],"names":["Radar","dalnost","i","push","azimut","className","map","item","style","width","height","borderWidth","transform","borderTop","lat","lon","latPred","lonPred","a","fetch","redirect","referrer","referrerPolicy","then","res","json","aircraft","catch","err","console","log","toRadians","degrees","Math","PI","Azimut","lat1","lon1","startLat","startLng","destLat","destLng","y","sin","cos","x","brng","atan2","MarkerRadar","props","locBase","form","useState","tablePos","setTablePos","colorMarker","onClick","right","top","left","bottom","tablePosition","anchor","latitude","longitude","e","onMarkerClick","xmlns","viewBox","d","allFormsOn","round","ControlPanel","latRef","React","createRef","lonRef","radius","controlOn","setControlOn","azCheck","setAzCheck","formCheck","setFormCheck","ref","defaultValue","placeholder","type","name","id","current","value","rad1","coordinates","alert","checked","onChange","radarON","allForms","Radar24","setLocBase","setLat","setLon","setRadius","azimutOn","setAzimutOn","time1","setTime1","time2","setTime2","setAllFormsOn","setForm","event","stopPropagation","useEffect","document","querySelector","display","clearTimeout","setTimeout","work","locate","lat2","lon2","φ1","φ2","Δφ","Δλ","sqrt","Dalnost","zoom","mapboxApiAccessToken","viewport","setViewport","target","rad","classname","scrollZoom","doubleClickZoom","dragRotate","boxZoom","dragPan","mapStyle","onViewportChange","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6dbb698c.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function Radar() {\n  const d = 300;\n    let dalnost = [];\n    for (let i = 0; i < d; i + 10) {\n      i += 10;\n      dalnost.push(i);\n    }\n    let azimut = [];\n    for (let i = 0; i < 180; i + 10) {\n      i += 10;\n      azimut.push(i);\n    }\n  \n  return(\n        <>\n                  <div className=\"range\">\n                    {dalnost.map((item) => (\n                      <>\n                      {item%50 ?\n                      <div\n                        key={item}\n                        style={{\n                          width: `${item * 3}px`,\n                          height: `${item * 3}px`,\n                          borderWidth: \"1px\",\n                        }}\n                      ></div>\n                      : <div\n                      key={item}\n                      style={{\n                        width: `${item * 3}px`,\n                        height: `${item * 3}px`,\n                        borderWidth: \"2px\",\n                      }}\n                    ></div>\n                    }\n                      </>\n                      \n                    ))}\n                  </div>\n                  <div className=\"azimut\">\n                    {azimut.map((item) => (\n                      <>\n                      {item%30 ? \n                      <div\n                      key={item}\n                      style={{\n                        transform: `rotate(${item}deg)`,\n                        borderWidth: \"1px\",\n                        borderTop: \"1px solid rgb(124, 124, 124, 0.568)\",\n                      }}\n                    ></div>\n                    :\n                    <div\n                      key={item}\n                      style={{\n                        transform: `rotate(${item}deg)`,\n                        borderWidth: \"1px\",\n                        borderTop: \"2px solid rgb(124, 124, 124, 0.568)\",\n                      }}\n                    ></div>\n                  }\n                  </>\n                  ))}\n                  </div>\n                </>\n    )\n}","\n  export default async function locate(lat, lon, latPred, lonPred) { //Запрос данных с FlightRadar24\n    function one(){if(+lat+lonPred >= 90){\n      return 90\n    }      else{\n      return +lat+lonPred;\n    }}\n    function two(){if(+lon-latPred <= -180){\n      return -180\n    }      else{\n      return +lon-latPred;\n    }}\n    function three(){if(+lat-lonPred <= -90){\n      return -90\n    }      else{\n      return +lat-lonPred;\n    }\n  }\n    function four(){if(+lon+latPred >= 180){\n      return 180\n    }\n      else{\n        return +lon+latPred;\n      }\n    }\n    // console.log(`http://data-live.flightradar24.com/zones/fcgi/feed.js?bounds=${one()},${two()},${three()},${four()}&adsb=1&air=1&array=1`\n    // )\n    // const url = `http://data-live.flightradar24.com/zones/fcgi/feed.js?bounds=${one()},${two()},${three()},${four()}&adsb=1&air=1&array=1`\n    const url = `http://127.0.0.1:7000`\n      return fetch(url, {\n      redirect: 'follow',\n      referrer: 'no-referrer',\n      referrerPolicy: 'no-referrer',\n    })\n      .then(res => {return res.json()})\n      .then(res =>{return res.aircraft})\n      .catch(err => \n        {console.log('error locate')\n        // alert(\n        //   \"Ошибка!\",\n        //   \"Проверьте подключение к интернету и перезагрузите приложение.\",\n        //   [\n        //     {\n        //       text: \"Отмена\",\n        //       style: \"cancel\",\n        //     },\n        //     { text: \"Перезагрузка\", onPress: () => window.location.reload()}\n        //   ,\n        //   ]\n        // )\n      }\n      )\n    }","   function toRadians(degrees) {\n    return degrees * Math.PI / 180;\n  };\n\n  function toDegrees(radians) {\n    return radians * 180 / Math.PI;\n  }\n\n  export default function Azimut(item, lat1, lon1) {\n    let startLat = lat1;\n    let startLng = lon1;\n    let destLat = item[2]\n    let destLng = item[3]\n\n    startLat = toRadians(startLat);\n    startLng = toRadians(startLng);\n    destLat = toRadians(destLat);\n    destLng = toRadians(destLng);\n\n    const y = Math.sin(destLng - startLng) * Math.cos(destLat);\n    const x = Math.cos(startLat) * Math.sin(destLat) -\n      Math.sin(startLat) * Math.cos(destLat) * Math.cos(destLng - startLng);\n    let brng = Math.atan2(y, x);\n    brng = toDegrees(brng);\n    return (brng + 360) % 360;\n  }","import { useState} from \"react\";\nimport { Marker} from \"react-map-gl\";\n\nexport default function MarkerRadar(props) {\n    const lat=props.lat;\n    const lon=props.lon;\n    const locBase=props.locBase;\n    const form=props.form;\n    \n  const [tablePos, setTablePos] = useState();\n\n  function tablePosition(item){\n    if (item[2] > lat) {\n      if (item[2] > lon) {\n        setTablePos({ right: \"10px\", top: \"10px\" });\n      } else {\n        setTablePos({ left: \"10px\", top: \"10px\" });\n      }\n    } else {\n      if (item[3] > lon) {\n        setTablePos({ right: \"10px\", bottom: \"10px\" });\n      } else {\n        setTablePos({ left: \"10px\", bottom: \"10px\" });\n      }\n    }\n  };\n\nfunction colorMarker(item) {\n    let color = {\n      'transform': `rotate(${item-90}deg)`,\n    }\n    return color\n  }\n\n  return (\n    <>\n      {locBase.map((item) => (\n              <Marker className=\"radar24__marker\" onClick={()=>tablePosition(item)} anchor=\"bottom\"  key={item[0]} latitude={item[2]} longitude={item[3]}>\n                <svg onClick={(e) => props.onMarkerClick(item, e)} className=\"radar24__marker__svg\" style={colorMarker(item[4])} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M482.3 192C516.5 192 576 221 576 256C576 292 516.5 320 482.3 320H365.7L265.2 495.9C259.5 505.8 248.9 512 237.4 512H181.2C170.6 512 162.9 501.8 165.8 491.6L214.9 320H112L68.8 377.6C65.78 381.6 61.04 384 56 384H14.03C6.284 384 0 377.7 0 369.1C0 368.7 .1818 367.4 .5398 366.1L32 256L.5398 145.9C.1818 144.6 0 143.3 0 142C0 134.3 6.284 128 14.03 128H56C61.04 128 65.78 130.4 68.8 134.4L112 192H214.9L165.8 20.4C162.9 10.17 170.6 0 181.2 0H237.4C248.9 0 259.5 6.153 265.2 16.12L365.7 192H482.3z\"/></svg>\n                <div onClick={(e) => props.onMarkerClick(item, e)} className=\"marker__name\">{item[17] || \"Без названия\"}</div>\n                 {form === item[0] || props.allFormsOn ? (\n                   <>\n                  <div\n                    onClick={(e) => props.onMarkerClick(item, e)}\n                    key={item[0]}\n                    className=\"marker__table\"\n                    style={tablePos}\n                  >\n                    <p>Азимут: {Math.round(item[20])}</p>\n                    <p>Дальность: {Math.round(item[19] / 100) / 10}</p>\n                    <p>Высота: {Math.round(item[5] / 0.33) / 10}</p>\n                    <p>Скорость: {Math.round(item[6] * 1.87)}</p>\n                    <p>Курс: {item[4]}</p>\n                  </div>\n                  </>\n                ) : null} \n              </Marker>\n              \n            ))}\n    </>\n  );\n}\n","import React, {useState} from \"react\";\n\nexport default function ControlPanel(props) {\n    const latRef = React.createRef();\n    const lonRef = React.createRef();\n    const radius = React.createRef();\n    const [controlOn, setControlOn] = useState(false)\n    const [azCheck, setAzCheck] = useState(false)\n    const [formCheck, setFormCheck] = useState(false)\n\n    function getRadar() {\n        if (latRef.current.value && lonRef.current.value) {\n          let lat1 = +latRef.current.value;\n          let lon1 = +lonRef.current.value;\n          let rad1 = +radius.current.value;\n          if ((lat1 >= -84) & (lon1 >= -178)) {\n              props.coordinates(lat1, lon1, rad1)\n          } else {\n            alert(\"Введите верные координаты!\");\n          }\n        } else {\n          alert(\"Введите обе координаты!\");\n        }\n      }\n    return(\n        <>\n        <div className=\"control__panel\">\n        {controlOn ?\n        <>\n        <div className=\"input__radar\">\n          <div>\n            <div>Широта</div>\n          <input\n            ref={latRef}\n            defaultValue={props.lat}\n            placeholder=\"Введите latitude\"\n            type=\"text\"\n            name=\"lat\"\n            id=\"lat\"\n            className=\"form\"\n          />\n          </div>\n          <div>\n            <div>Долгота</div>\n          <input\n            ref={lonRef}\n            defaultValue={props.lon}\n            placeholder=\"Введите longitude\"\n            type=\"text\"\n            name=\"lon\"\n            id=\"lon\"\n            className=\"form\"\n          />\n          </div>\n          <div>\n            <div>Радиус</div>\n          <input\n            ref={radius}\n            defaultValue={props.radius}\n            placeholder=\"Введите радиус поиска\"\n            type=\"text\"\n            name=\"radius\"\n            id=\"radius\"\n            className=\"form\"\n          />\n          </div>\n          <button onClick={getRadar} type=\"submit\">\n            Ввод\n          </button>\n        </div>\n        <div>\n        <div>\n          <div>Азимутальный круг</div>\n        <label className=\"switch\">\n          <input\n            checked={azCheck}\n            onChange={(e) => {\n              setAzCheck(!azCheck)\n              props.radarON(e)\n            }}\n            type=\"checkbox\"\n          />\n          <span className=\"slider round\"></span>\n        </label>\n        </div>\n        <div>\n          <div>Все формуляры</div>\n        <label className=\"switch\">\n          <input\n            checked={formCheck}\n            onChange={(e) => {\n              setFormCheck(!formCheck)\n              props.allForms(e)\n            }}\n            type=\"checkbox\"\n          />\n          <span className=\"slider round\"></span>\n        </label>\n        </div>\n        </div>\n        </>: null}\n      </div>\n      <div onClick={()=>{controlOn ? setControlOn(false) : setControlOn(true)}} className=\"control_arrow\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z\"/></svg>\n      </div>\n        </>\n    )\n}","import { useState, useEffect } from \"react\";\nimport React from \"react\";\nimport \"./Radar24.css\";\nimport Map, { Marker, FullscreenControl} from \"react-map-gl\";\nimport Radar from \"./Radar\";\nimport locate from \"./locate\";\nimport Dalnost from \"./Dalnost\";\nimport Azimut from \"./Azimut\";\nimport MarkerRadar from \"./MarkerRadar\";\nimport ControlPanel from \"./ControlPanel\";\n\nfunction Radar24() {\n  const [locBase, setLocBase] = useState([]);\n  const [lat, setLat] = useState(61.28527651284786);\n  const [lon, setLon] = useState(63.17582723137468);\n  const [radius, setRadius] = useState(300);\n  const [azimutOn, setAzimutOn] = useState(false);\n  const [time1, setTime1] = useState();\n  const [time2, setTime2] = useState();\n  const [allFormsOn, setAllFormsOn] = useState(false);\n  let latPred;\n  let lonPred;\n  // let granica1 = lat + 2.6;\n  // let granica2 = lon - 5.7;\n  // let granica3 = lat - 2.8;\n  // let granica4 = lon + 5.4;\n  const [form, setForm] = useState(0);\n\n  const onMarkerClick = (item, event) => {\n    if(!allFormsOn){\n    item[0] === form ? setForm(0) : setForm(item[0]);\n    try{\n    event.stopPropagation();}\n    catch(e){return}\n    } else{return}\n  };\n\n  function coordinates(lat, lon, rad){\n    setLat(+lat);\n    setLon(+lon);\n    setRadius(+rad);\n    setViewport({\n      latitude: lat,\n      longitude: lon,\n      zoom: 5.8,\n      mapboxApiAccessToken:\n        \"pk.eyJ1Ijoib3ZlcmJyYXRzayIsImEiOiJja3dqODA3ZnMxZHA4Mm9udnlmOXdxMXQwIn0.s79NCW6WTu9I94Wv7MhNDA\",\n    });\n  }\n\n  function radarON(e){\n    setAzimutOn(e.target.checked);\n  }\n  function allForms(e){\n    setAllFormsOn(e.target.checked);\n  }\n\n  useEffect(() => {\n    try{\n    const footer = document.querySelector(\".footer\");\n    footer.style.display = \"none\";\n    }catch(e){return}\n  }, []);\n\n\n\n  useEffect(() => {\n    // let time1;\n    // let time2;\n    clearTimeout(time1);\n    clearTimeout(time2);\n    //запрос данных с FlightRadar24 по введенным координатам\n    setTime1(setTimeout(function work() {\n    latPred = (+radius/(Math.cos(+lat * (Math.PI/180)) * 111.321377778) )\n      lonPred = (+radius/111.134861111)\n      // console.log(lonPred)\n        locate(lat, lon, latPred, lonPred)\n          .then((res) => {\n            res.map((item) => {\n              item.push(Dalnost(item, lat, lon));\n              item.push(Azimut(item, lat, lon));\n            });\n            return res;\n          })\n          //добавление в массив результатов азимута самолета\n          .then((res) => setLocBase(res))\n          .then((res) =>  setTime2(setTimeout(work, 1000)))\n          .catch((err) => console.log(err))\n      // });\n    }, 1000));\n  }, [lat, lon, radius]);\n\n  const [viewport, setViewport] = React.useState({\n    //Карта\n    latitude: lat,\n    longitude: lon,\n    zoom: 5.8,\n    mapboxApiAccessToken:\n      \"pk.eyJ1Ijoib3ZlcmJyYXRzayIsImEiOiJja3dqODA3ZnMxZHA4Mm9udnlmOXdxMXQwIn0.s79NCW6WTu9I94Wv7MhNDA\",\n  });\n\n  return (\n    <div className=\"radar24\">\n      <ControlPanel allForms={allForms} radarON={radarON} lat={lat} lon={lon} radius={radius} coordinates={coordinates}></ControlPanel>\n        <div className=\"radar24__position\">\n          <Map classname=\"radar24__map\"\n            id=\"666\"\n            scrollZoom={false}\n            doubleClickZoom={false}\n            dragRotate={false}\n            boxZoom={false}\n            dragPan={false}\n            {...viewport}\n            width=\"100%\"\n            height=\"100%\"\n            mapStyle=\"mapbox://styles/mapbox/streets-v11\"\n            onViewportChange={setViewport}\n            onClick={() => onMarkerClick(0)}\n          >\n            <MarkerRadar  allFormsOn={allFormsOn} form={form} onMarkerClick={onMarkerClick} lat={lat} lon={lon} locBase={locBase} ></MarkerRadar>\n            <Marker latitude={lat} longitude={lon}>\n              {azimutOn ? <Radar/> : null}\n            </Marker>\n            <FullscreenControl />\n          </Map>\n      </div>\n    </div>\n  );\n}\nexport default Radar24;\n","export default function Dalnost(item, lat1, lon1) {\n    let lat2 = item[2];\n    let lon2 = item[3];\n    const R = 6371e3; // метры\n    const φ1 = lat1 * Math.PI / 180; // φ, λ в радианах\n    const φ2 = lat2 * Math.PI / 180;\n    const Δφ = (lat2 - lat1) * Math.PI / 180;\n    const Δλ = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\n      Math.cos(φ1) * Math.cos(φ2) *\n      Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const d = R * c; // в метры\n    return d;\n  }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Radar24 from './Radar24';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Radar24 />\n  </React.StrictMode>,\n    document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}